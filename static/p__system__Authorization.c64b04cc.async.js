(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[472],{87588:function(S,y,n){"use strict";var l=n(22122),o=n(67294),h=n(61144),i=n(65734),a=function(p,c){return o.createElement(i.Z,(0,l.Z)({},p,{ref:c,icon:h.Z}))};y.Z=o.forwardRef(a)},63549:function(S){S.exports={"table-wrapper":"table-wrapper___24Zk1",actions:"actions___79eP3"}},30938:function(S,y,n){"use strict";n.r(y),n.d(y,{default:function(){return ne}});var l=n(8963),o=n(38291),h=n(34792),i=n(48086),a=n(90636),m=n(11849),p=n(3182),c=n(2824),V=n(49111),I=n(19650),oe=n(57663),E=n(71577),ce=n(71194),A=n(50146),T=n(67294),U=n(96486),H=n(36773),$=n(87588),b=n(29811),K=n(43358),J=n(34041),W=n(47673),Q=n(77808),N=n(9715),C=n(71481),k=n(81910),u=n(85893),G={labelCol:{span:6},wrapperCol:{span:16}},q=function(Z){var O=(0,k.tT)("@@initialState"),_=O.initialState,R=[{label:"\u7BA1\u7406\u5458",value:4}];_&&_.user&&_.user.userRole===5&&R.push({label:"\u8D85\u7EA7\u7BA1\u7406\u5458",value:5});var D=C.Z.useForm(),w=(0,c.Z)(D,1),P=w[0],f=function(){var s=(0,p.Z)((0,a.Z)().mark(function t(){var e,X;return(0,a.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,P.validateFields();case 2:if(e=g.sent,Z.type!=="add"){g.next=9;break}return g.next=6,b.uO({phone:e.phone,username:e.username,role:e.role});case 6:X=g.sent,g.next=10;break;case 9:Z.type==="edit";case 10:i.ZP.success("\u64CD\u4F5C\u6210\u529F"),Z.onOk();case 12:case"end":return g.stop()}},t)}));return function(){return s.apply(this,arguments)}}(),r=function(){P.resetFields(),Z.onCancel()};return(0,u.jsx)(A.Z,{bodyStyle:{padding:"24px"},centered:!0,onCancel:r,onOk:f,open:Z.visible,title:Z.type==="add"?"\u65B0\u589E\u7BA1\u7406\u5458":"\u7F16\u8F91\u7BA1\u7406\u5458",children:(0,u.jsxs)(C.Z,(0,m.Z)((0,m.Z)({form:P},G),{},{children:[(0,u.jsx)(C.Z.Item,{name:"username",label:"\u59D3\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}],children:(0,u.jsx)(Q.Z,{})}),(0,u.jsx)(C.Z.Item,{name:"phone",label:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}],children:(0,u.jsx)(Q.Z,{})}),(0,u.jsx)(C.Z.Item,{name:"role",label:"\u89D2\u8272",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}],children:(0,u.jsx)(J.Z,{options:R})})]}))})},L=q,ee=n(63549),j=n.n(ee),re=A.Z.confirm,B=function(){var Z=[{title:"\u59D3\u540D",dataIndex:"username",key:"username"},{title:"\u624B\u673A\u53F7\u7801",dataIndex:"phone",key:"phone"},{title:"\u6743\u9650\u7B49\u7EA7",dataIndex:"roleName",key:"roleName"},{title:"\u6743\u9650\u8BF4\u660E",dataIndex:"comment",key:"comment"},{title:"\u64CD\u4F5C",dataIndex:"action",key:"action",render:function(v,z){return de===1&&z.role===5?"-":(0,u.jsxs)(I.Z,{children:[(0,u.jsx)(E.Z,{type:"link",children:"\u4FEE\u6539"}),(0,u.jsx)(E.Z,{type:"link",onClick:function(){return Ze(z)},children:"\u5220\u9664"})]})}}],O=(0,T.useState)(!1),_=(0,c.Z)(O,2),R=_[0],D=_[1],w=(0,T.useState)({current:1,pageSize:10}),P=(0,c.Z)(w,2),f=P[0],r=P[1],s=function(v){r({current:v.current||1,pageSize:v.pageSize||10})},t=(0,T.useState)([]),e=(0,c.Z)(t,2),X=e[0],te=e[1],g=(0,T.useState)(0),ae=(0,c.Z)(g,2),de=ae[0],me=ae[1],Y=(0,U.debounce)((0,p.Z)((0,a.Z)().mark(function M(){var v;return(0,a.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,D(!0),d.next=4,b.v5({pageNum:f.current,pageSize:f.pageSize});case 4:v=d.sent,v&&(te(v.list),r((0,m.Z)((0,m.Z)({},f),{},{total:v.totalNum})),me(v.rootNum)),D(!1),d.next=12;break;case 9:d.prev=9,d.t0=d.catch(0),D(!1);case 12:case"end":return d.stop()}},M,null,[[0,9]])})));(0,T.useEffect)(function(){Y()},[f.current,f.pageSize]);var pe=(0,T.useState)(!1),se=(0,c.Z)(pe,2),fe=se[0],ue=se[1],he=(0,T.useState)("add"),ie=(0,c.Z)(he,2),ge=ie[0],ve=ie[1],ye=function(){ue(!0),ve("add")},le=function(){ue(!1)},Ze=function(v){re({title:"\u5220\u9664\u786E\u8BA4",icon:(0,u.jsx)($.Z,{}),content:"\u786E\u5B9A\u5220\u9664\u8BE5\u8D26\u53F7\u5417\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C",onOk:function(){return(0,p.Z)((0,a.Z)().mark(function d(){return(0,a.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,b.h8({userID:v.userID});case 2:i.ZP.success("\u64CD\u4F5C\u6210\u529F"),Y();case 4:case"end":return x.stop()}},d)}))()},onCancel:function(){}})},Te=function(){Y(),le()};return(0,u.jsx)(H.ZP,{children:(0,u.jsxs)("div",{className:j()["table-wrapper"],children:[(0,u.jsx)("div",{className:j().actions,children:(0,u.jsx)(E.Z,{type:"primary",onClick:ye,children:"\u65B0\u589E\u7BA1\u7406\u5458"})}),(0,u.jsx)(o.Z,{rowKey:"userID",columns:Z,dataSource:X,loading:R,onChange:s,pagination:f,scroll:{x:"max-content"}}),(0,u.jsx)(L,{onCancel:le,onOk:Te,type:ge,visible:fe})]})})},ne=B},29811:function(S,y,n){"use strict";n.d(y,{x4:function(){return a},Z3:function(){return p},uO:function(){return H},v5:function(){return b},h8:function(){return J}});var l=n(90636),o=n(3182),h=n(99871),i=n(636);function a(r){return m.apply(this,arguments)}function m(){return m=(0,o.Z)((0,l.Z)().mark(function r(s){return(0,l.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/api/v1/user/login",{method:"POST",data:s}));case 1:case"end":return e.stop()}},r)})),m.apply(this,arguments)}function p(r){return c.apply(this,arguments)}function c(){return c=(0,o.Z)((0,l.Z)().mark(function r(s){return(0,l.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/api/v1/user/sendCode",{method:"POST",data:s}));case 1:case"end":return e.stop()}},r)})),c.apply(this,arguments)}function V(r){return I.apply(this,arguments)}function I(){return I=_asyncToGenerator(_regeneratorRuntime().mark(function r(s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("api/v1/user/submitRole",{method:"POST",data:s}));case 1:case"end":return e.stop()}},r)})),I.apply(this,arguments)}function oe(){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("api/v1/user/verifyInfo",{method:"POST"}));case 1:case"end":return t.stop()}},r)})),E.apply(this,arguments)}function ce(){return A.apply(this,arguments)}function A(){return A=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("api/v1/user/info",{method:"GET"}));case 1:case"end":return t.stop()}},r)})),A.apply(this,arguments)}function T(r){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime().mark(function r(s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("api/v1/user/modifyInfo",{method:"POST",data:s}));case 1:case"end":return e.stop()}},r)})),U.apply(this,arguments)}function H(r){return $.apply(this,arguments)}function $(){return $=(0,o.Z)((0,l.Z)().mark(function r(s){return(0,l.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/api/v1/user/assignAdmin",{method:"POST",data:s}));case 1:case"end":return e.stop()}},r)})),$.apply(this,arguments)}function b(r){return K.apply(this,arguments)}function K(){return K=(0,o.Z)((0,l.Z)().mark(function r(s){return(0,l.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/api/v1/user/getAdmins?".concat((0,h.R)(s))));case 1:case"end":return e.stop()}},r)})),K.apply(this,arguments)}function J(r){return W.apply(this,arguments)}function W(){return W=(0,o.Z)((0,l.Z)().mark(function r(s){return(0,l.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/api/v1/user/deleteUser",{method:"POST",data:s}));case 1:case"end":return e.stop()}},r)})),W.apply(this,arguments)}function Q(r){return N.apply(this,arguments)}function N(){return N=_asyncToGenerator(_regeneratorRuntime().mark(function r(s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/common/area?".concat(objectToUrlParams(s)),{method:"GET"}));case 1:case"end":return e.stop()}},r)})),N.apply(this,arguments)}function C(r){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime().mark(function r(s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/common/uploadFile",{method:"POST",data:s}));case 1:case"end":return e.stop()}},r)})),k.apply(this,arguments)}function u(r){return G.apply(this,arguments)}function G(){return G=_asyncToGenerator(_regeneratorRuntime().mark(function r(s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/common/uploadFile",{method:"DELETE",data:s}));case 1:case"end":return e.stop()}},r)})),G.apply(this,arguments)}function q(){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/v1/user/getAddressList",{method:"GET"}));case 1:case"end":return t.stop()}},r)})),L.apply(this,arguments)}function ee(r){return j.apply(this,arguments)}function j(){return j=_asyncToGenerator(_regeneratorRuntime().mark(function r(s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/user/addAddress",{method:"POST",data:s}));case 1:case"end":return e.stop()}},r)})),j.apply(this,arguments)}function re(r){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime().mark(function r(s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/user/modifyAddress",{method:"POST",data:s}));case 1:case"end":return e.stop()}},r)})),B.apply(this,arguments)}function ne(r){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime().mark(function r(s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/user/deleteAddress",{method:"POST",data:s}));case 1:case"end":return e.stop()}},r)})),F.apply(this,arguments)}function Z(){return O.apply(this,arguments)}function O(){return O=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},r)})),O.apply(this,arguments)}function _(){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},r)})),R.apply(this,arguments)}function D(){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},r)})),w.apply(this,arguments)}function P(){return f.apply(this,arguments)}function f(){return f=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},r)})),f.apply(this,arguments)}},99871:function(S,y,n){"use strict";n.d(y,{R:function(){return l},D:function(){return o}});function l(h){var i=Object.keys(h).map(function(a){return"".concat(a,"=").concat(h[a])});return i.join("&")}function o(h){var i=new RegExp("(^|&)"+h+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(i);return a!=null?decodeURIComponent(a[2]):null}},636:function(S,y,n){"use strict";var l=n(34792),o=n(48086),h=n(12666),i=h.Z.create({baseURL:"/",timeout:3e4,withCredentials:!1});i.interceptors.request.use(function(a){a&&a.headers&&(a.headers["Content-Type"]||(a.headers["Content-Type"]="application/json"));var m=localStorage.getItem("token");return(a==null?void 0:a.url)!=="/api/v1/user/login"&&(a.headers.Authorization="".concat(m)),a},function(a){return Promise.reject(a)}),i.interceptors.response.use(function(a){var m=a.data;console.log(Object.prototype.toString.call(a));var p=a.data,c=a.status,V=a.statusText;if(c!==200)return o.ZP.error(V),null;if(p.status===10010)return p;if(p.status!==200)throw o.ZP.error(a.msg),new Error(a.msg);return p.data},function(a){return console.log("err"+a),Promise.reject(a)}),y.Z=i}}]);
