(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[472],{87588:function(D,y,a){"use strict";var c=a(22122),d=a(67294),v=a(61144),i=a(65734),u=function(p,m){return d.createElement(i.Z,(0,c.Z)({},p,{ref:m,icon:v.Z}))};y.Z=d.forwardRef(u)},63549:function(D){D.exports={"table-wrapper":"table-wrapper___24Zk1",actions:"actions___79eP3"}},30938:function(D,y,a){"use strict";a.r(y),a.d(y,{default:function(){return ne}});var c=a(8963),d=a(38291),v=a(34792),i=a(48086),u=a(90636),g=a(11849),p=a(3182),m=a(2824),V=a(49111),$=a(19650),ce=a(57663),_=a(71577),me=a(71194),C=a(50146),Z=a(67294),k=a(96486),J=a(36773),b=a(87588),N=a(81910),O=a(29811),Y=a(43358),G=a(34041),de=a(47673),A=a(77808),pe=a(9715),R=a(71481),s=a(85893),B={labelCol:{span:6},wrapperCol:{span:16}},q=function(l){var w=(0,N.tT)("@@initialState"),I=w.initialState,S=[{label:"\u7BA1\u7406\u5458",value:4}];I&&I.user&&I.user.userRole===5&&S.push({label:"\u8D85\u7EA7\u7BA1\u7406\u5458",value:5});var K=R.Z.useForm(),M=(0,m.Z)(K,1),T=M[0],P=function(){var t=(0,p.Z)((0,u.Z)().mark(function n(){var e,W;return(0,u.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,T.validateFields();case 2:return e=h.sent,W={phone:e.phone,username:e.username,role:e.role},l.type==="edit"&&Object.assign(W,{userID:l.managerData.userID}),h.prev=5,h.next=8,O.uO(W);case 8:i.ZP.success("\u64CD\u4F5C\u6210\u529F"),l.onOk(),h.next=14;break;case 12:h.prev=12,h.t0=h.catch(5);case 14:case"end":return h.stop()}},n,null,[[5,12]])}));return function(){return t.apply(this,arguments)}}(),r=function(){T.resetFields(),l.onCancel()};return l.type==="edit"&&l.managerData&&T.setFieldsValue({username:l.managerData.username,phone:l.managerData.phone,role:l.managerData.role}),(0,Z.useEffect)(function(){T.setFieldsValue({username:l.managerData.username,phone:l.managerData.phone,role:l.managerData.role})},[l.managerData]),(0,s.jsx)(C.Z,{bodyStyle:{padding:"24px"},centered:!0,onCancel:r,onOk:P,open:l.visible,title:l.type==="add"?"\u65B0\u589E\u7BA1\u7406\u5458":"\u7F16\u8F91\u7BA1\u7406\u5458",children:(0,s.jsxs)(R.Z,(0,g.Z)((0,g.Z)({form:T},B),{},{children:[(0,s.jsx)(R.Z.Item,{name:"username",label:"\u59D3\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}],children:(0,s.jsx)(A.Z,{})}),(0,s.jsx)(R.Z.Item,{name:"phone",label:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}],children:(0,s.jsx)(A.Z,{})}),(0,s.jsx)(R.Z.Item,{name:"role",label:"\u89D2\u8272",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}],children:(0,s.jsx)(G.Z,{options:S})})]}))})},F=q,ee=a(63549),j=a.n(ee),re=C.Z.confirm,L=function(){var l=(0,N.tT)("@@initialState"),w=l.initialState,I=[{title:"\u59D3\u540D",dataIndex:"username",key:"username"},{title:"\u624B\u673A\u53F7\u7801",dataIndex:"phone",key:"phone"},{title:"\u6743\u9650\u7B49\u7EA7",dataIndex:"roleName",key:"roleName"},{title:"\u6743\u9650\u8BF4\u660E",dataIndex:"comment",key:"comment"},{title:"\u64CD\u4F5C",dataIndex:"action",key:"action",render:function(o,U){return ge===1&&U.role===5?"-":(0,s.jsxs)($.Z,{children:[(0,s.jsx)(_.Z,{type:"link",onClick:function(){return _e(U)},children:"\u4FEE\u6539"}),(0,s.jsx)(_.Z,{type:"link",onClick:function(){return Oe(U)},children:"\u5220\u9664"})]})}}],S=(0,Z.useState)(!1),K=(0,m.Z)(S,2),M=K[0],T=K[1],P=(0,Z.useState)({current:1,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(o){return"\u603B\u5171 ".concat(o," \u6761")}}),r=(0,m.Z)(P,2),t=r[0],n=r[1],e=function(o){n({current:o.current||1,pageSize:o.pageSize||10})},W=(0,Z.useState)([]),Q=(0,m.Z)(W,2),h=Q[0],fe=Q[1],he=(0,Z.useState)(0),ae=(0,m.Z)(he,2),ge=ae[0],ve=ae[1],H=(0,k.debounce)((0,p.Z)((0,u.Z)().mark(function E(){var o;return(0,u.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,T(!0),f.next=4,O.v5({pageNum:t.current,pageSize:t.pageSize});case 4:o=f.sent,o&&(fe(o.list),n((0,g.Z)((0,g.Z)({},t),{},{total:o.totalNum})),ve(o.rootNum)),T(!1),f.next=12;break;case 9:f.prev=9,f.t0=f.catch(0),T(!1);case 12:case"end":return f.stop()}},E,null,[[0,9]])})));(0,Z.useEffect)(function(){H()},[t.current,t.pageSize]);var ye=(0,Z.useState)(!1),te=(0,m.Z)(ye,2),ue=te[0],X=te[1],Ze=(0,Z.useState)("add"),se=(0,m.Z)(Ze,2),Te=se[0],ie=se[1],Re=(0,Z.useState)({}),le=(0,m.Z)(Re,2),we=le[0],Ee=le[1],Se=function(){X(!0),ie("add")},oe=function(){X(!1)},_e=function(o){X(!0),ie("edit"),Ee({username:o.username,phone:o.phone,role:o.role})},Oe=function(o){re({title:"\u5220\u9664\u786E\u8BA4",icon:(0,s.jsx)(b.Z,{}),content:"\u786E\u5B9A\u5220\u9664\u8BE5\u8D26\u53F7\u5417\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C",onOk:function(){return(0,p.Z)((0,u.Z)().mark(function f(){return(0,u.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,O.h8({userID:o.userID});case 2:i.ZP.success("\u64CD\u4F5C\u6210\u529F"),H();case 4:case"end":return x.stop()}},f)}))()},onCancel:function(){}})},Me=function(){H(),oe()};return(0,s.jsx)(J.ZP,{children:(0,s.jsxs)("div",{className:j()["table-wrapper"],children:[(0,s.jsx)("div",{className:j().actions,children:w&&w.user&&w.user.userRole===5&&(0,s.jsx)(_.Z,{type:"primary",onClick:Se,children:"\u65B0\u589E\u7BA1\u7406\u5458"})}),(0,s.jsx)(d.Z,{rowKey:"userID",columns:I,dataSource:h,loading:M,onChange:e,pagination:t,scroll:{x:"max-content"}}),ue&&(0,s.jsx)(F,{managerData:we,onCancel:oe,onOk:Me,type:Te,visible:ue})]})})},ne=L},29811:function(D,y,a){"use strict";a.d(y,{x4:function(){return u},Z3:function(){return p},uO:function(){return J},v5:function(){return N},h8:function(){return Y}});var c=a(90636),d=a(3182),v=a(99871),i=a(636);function u(r){return g.apply(this,arguments)}function g(){return g=(0,d.Z)((0,c.Z)().mark(function r(t){return(0,c.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/api/v1/user/login",{method:"POST",data:t}));case 1:case"end":return e.stop()}},r)})),g.apply(this,arguments)}function p(r){return m.apply(this,arguments)}function m(){return m=(0,d.Z)((0,c.Z)().mark(function r(t){return(0,c.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/api/v1/user/sendCode",{method:"POST",data:t}));case 1:case"end":return e.stop()}},r)})),m.apply(this,arguments)}function V(r){return $.apply(this,arguments)}function $(){return $=_asyncToGenerator(_regeneratorRuntime().mark(function r(t){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("api/v1/user/submitRole",{method:"POST",data:t}));case 1:case"end":return e.stop()}},r)})),$.apply(this,arguments)}function ce(){return _.apply(this,arguments)}function _(){return _=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("api/v1/user/verifyInfo",{method:"POST"}));case 1:case"end":return n.stop()}},r)})),_.apply(this,arguments)}function me(){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("api/v1/user/info",{method:"GET"}));case 1:case"end":return n.stop()}},r)})),C.apply(this,arguments)}function Z(r){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime().mark(function r(t){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("api/v1/user/modifyInfo",{method:"POST",data:t}));case 1:case"end":return e.stop()}},r)})),k.apply(this,arguments)}function J(r){return b.apply(this,arguments)}function b(){return b=(0,d.Z)((0,c.Z)().mark(function r(t){return(0,c.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/api/v1/user/assignAdmin",{method:"POST",data:t}));case 1:case"end":return e.stop()}},r)})),b.apply(this,arguments)}function N(r){return O.apply(this,arguments)}function O(){return O=(0,d.Z)((0,c.Z)().mark(function r(t){return(0,c.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/api/v1/user/getAdmins?".concat((0,v.R)(t))));case 1:case"end":return e.stop()}},r)})),O.apply(this,arguments)}function Y(r){return G.apply(this,arguments)}function G(){return G=(0,d.Z)((0,c.Z)().mark(function r(t){return(0,c.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/api/v1/user/deleteUser",{method:"POST",data:t}));case 1:case"end":return e.stop()}},r)})),G.apply(this,arguments)}function de(r){return A.apply(this,arguments)}function A(){return A=_asyncToGenerator(_regeneratorRuntime().mark(function r(t){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/common/area?".concat(objectToUrlParams(t)),{method:"GET"}));case 1:case"end":return e.stop()}},r)})),A.apply(this,arguments)}function pe(r){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function r(t){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/common/uploadFile",{method:"POST",data:t}));case 1:case"end":return e.stop()}},r)})),R.apply(this,arguments)}function s(r){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime().mark(function r(t){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/common/uploadFile",{method:"DELETE",data:t}));case 1:case"end":return e.stop()}},r)})),B.apply(this,arguments)}function q(){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/v1/user/getAddressList",{method:"GET"}));case 1:case"end":return n.stop()}},r)})),F.apply(this,arguments)}function ee(r){return j.apply(this,arguments)}function j(){return j=_asyncToGenerator(_regeneratorRuntime().mark(function r(t){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/user/addAddress",{method:"POST",data:t}));case 1:case"end":return e.stop()}},r)})),j.apply(this,arguments)}function re(r){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime().mark(function r(t){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/user/modifyAddress",{method:"POST",data:t}));case 1:case"end":return e.stop()}},r)})),L.apply(this,arguments)}function ne(r){return z.apply(this,arguments)}function z(){return z=_asyncToGenerator(_regeneratorRuntime().mark(function r(t){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/user/deleteAddress",{method:"POST",data:t}));case 1:case"end":return e.stop()}},r)})),z.apply(this,arguments)}function l(){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}},r)})),w.apply(this,arguments)}function I(){return S.apply(this,arguments)}function S(){return S=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}},r)})),S.apply(this,arguments)}function K(){return M.apply(this,arguments)}function M(){return M=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}},r)})),M.apply(this,arguments)}function T(){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}},r)})),P.apply(this,arguments)}},99871:function(D,y,a){"use strict";a.d(y,{R:function(){return c},D:function(){return d}});function c(v){var i=Object.keys(v).map(function(u){return"".concat(u,"=").concat(v[u])});return i.join("&")}function d(v){var i=new RegExp("(^|&)"+v+"=([^&]*)(&|$)"),u=window.location.search.substr(1).match(i);return u!=null?decodeURIComponent(u[2]):null}},636:function(D,y,a){"use strict";var c=a(34792),d=a(48086),v=a(12666),i=v.Z.create({baseURL:"/",timeout:3e4,withCredentials:!1});i.interceptors.request.use(function(u){u&&u.headers&&(u.headers["Content-Type"]||(u.headers["Content-Type"]="application/json"));var g=localStorage.getItem("token");return(u==null?void 0:u.url)!=="/api/v1/user/login"&&(u.headers.Authorization="".concat(g)),u},function(u){return Promise.reject(u)}),i.interceptors.response.use(function(u){var g=u.data,p=u.data,m=u.status,V=u.statusText;if(m!==200)return d.ZP.error(V),p;if(p.status===10010)return p;if(p.status!==200)throw d.ZP.error(p.data||u.msg),new Error(u.msg);return p.data},function(u){return console.log("err"+u),Promise.reject(u)}),y.Z=i}}]);
