(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[955],{79027:function(M){M.exports={"order-detail-container":"order-detail-container___LGnty","operate-btn":"operate-btn___uyekI"}},31134:function(M,A,r){"use strict";r.d(A,{Zv:function(){return l},_y:function(){return y}});var t=r(32059),m=r(975),S,d,O,o,D,Z={WAIT_DELIVER:3,WAIT_RECEIVE:4,RECEIVED:5,AFTER_SALE:6},_=(S={},(0,t.Z)(S,Z.WAIT_DELIVER,"\u4EE3\u53D1\u8D27"),(0,t.Z)(S,Z.WAIT_RECEIVE,"\u5F85\u6536\u8D27/\u5DF2\u53D1\u8D27"),(0,t.Z)(S,Z.RECEIVED," \u5DF2\u7B7E\u6536"),S),T={UNKNOWN:0,APPROVED:1,REJECTED:2,CLEAR:3},V=(d={},(0,t.Z)(d,T.UNKNOWN,"\u672A\u77E5"),(0,t.Z)(d,T.APPROVED,"\u5BA1\u6838\u901A\u8FC7"),(0,t.Z)(d,T.REJECTED,"\u5BA1\u6838\u5931\u8D25"),(0,t.Z)(d,T.CLEAR,"\u6E05\u96F6"),d),c={UNKNOWN:0,SUBMITTED:1,REJECTED:2,SUCCESS:3},K=(O={},(0,t.Z)(O,c.UNKNOWN,"\u672A\u77E5"),(0,t.Z)(O,c.SUBMITTED,"\u5DF2\u63D0\u4EA4"),(0,t.Z)(O,c.REJECTED,"\u88AB\u62D2\u7EDD"),(0,t.Z)(O,c.SUCCESS,"\u6210\u529F"),O),a={UNKNOWN:0,CUSTOMER:1,SUPPLIER:2,BUYER:3,ADMIN:4,ROOT:5},P=(o={},(0,t.Z)(o,a.UNKNOWN,"\u672A\u77E5"),(0,t.Z)(o,a.CUSTOMER,"\u5BA2\u6237"),(0,t.Z)(o,a.SUPPLIER,"\u4F9B\u5E94\u5546"),(0,t.Z)(o,a.BUYER,"\u4E70\u5BB6"),(0,t.Z)(o,a.ADMIN,"\u7BA1\u7406\u5458"),(0,t.Z)(o,a.ROOT,"\u8D85\u7EA7\u7BA1\u7406\u5458"),o),v={APPLICATION:0,SPEND:1,EXPIRED:2,QUIT:3,CANCEL:4},s=(D={},(0,t.Z)(D,v.APPLICATION,"\u65B0\u589E"),(0,t.Z)(D,v.SPEND,"\u6D88\u8D39"),(0,t.Z)(D,v.EXPIRED,"\u8FC7\u671F"),(0,t.Z)(D,v.QUIT,"\u79BB\u804C"),(0,t.Z)(D,v.CANCEL,"\u6E05\u96F6"),D),l=new Map([[m.i4.Buyers,"\u91C7\u8D2D\u5546"],[m.i4.Supplier,"\u4F9B\u8D27\u5546"],[m.i4.Management,"\u7BA1\u7406\u5458"],[m.i4.Super_Management,"\u8D85\u7EA7\u7BA1\u7406\u5458"]]),y=new Map([[3,"\u5F85\u53D1\u8D27"],[4,"\u5F85\u6536\u8D27"],[5,"\u5DF2\u7B7E\u6536"],[6,"\u552E\u540E/\u7ED3\u675F"]])},66754:function(M,A,r){"use strict";r.r(A),r.d(A,{default:function(){return ye}});var t=r(57663),m=r(71577),S=r(87593),d=r(37636),O=r(13062),o=r(71230),D=r(89032),Z=r(15746),_=r(12968),T=r(26141),V=r(48736),c=r(27049),K=r(98858),a=r(4914),P=r(90636),v=r(3182),s=r(2824),l=r(67294),y=r(27484),n=r.n(y),le=r(95916),ie=r(99871),b=r(1987),xe=r(71194),de=r(48889),q=r(11849),Be=r(88983),$=r(47933),Ne=r(34792),oe=r(48086),Ue=r(9715),B=r(71481),Me=r(43358),ee=r(34041),be=r(47673),ce=r(60345),C=r(975),e=r(85893),me={labelCol:{span:6},wrapperCol:{span:16}},Ee=ce.Z.TextArea,X=ee.Z.Option,ve=new Map([[3,"\u7ED3\u675F\u8BA2\u5355"],[4,"\u552E\u540E\u8BB0\u5F55"],[5,"\u552E\u540E\u8BB0\u5F55"]]),pe=new Map([[3,"\u6C9F\u901A\u5907\u6CE8"],[4,"\u552E\u540E\u8BB0\u5F55"],[5,"\u552E\u540E\u8BB0\u5F55"]]),j;(function(R){R[R.Apply_Exchange=1]="Apply_Exchange",R[R.Apply_Refund=2]="Apply_Refund",R[R.Other=3]="Other"})(j||(j={}));var he=function(p){var G=B.Z.useForm(),L=(0,s.Z)(G,1),I=L[0],J=function(){var U=(0,v.Z)((0,P.Z)().mark(function h(){var F,g;return(0,P.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,I.validateFields();case 3:F=u.sent,g={queryOrderID:Number(p.id),reason:F.reason},u.t0=p.orderStatus,u.next=u.t0===C.iF.To_Be_Delivered?8:u.t0===C.iF.Awaiting_Receipt||u.t0===C.iF.Have_Been_Received?12:21;break;case 8:return Object.assign(g,{returnPointType:F.returnPointType}),u.next=11,b.qJ(g);case 11:return u.abrupt("break",22);case 12:if(F.afterSalesType!==j.Apply_Refund){u.next=18;break}return Object.assign(g,{returnPointType:F.returnPointType}),u.next=16,b.ui(g);case 16:u.next=20;break;case 18:return u.next=20,b.NN(g);case 20:return u.abrupt("break",22);case 21:return u.abrupt("break",22);case 22:oe.ZP.success("\u64CD\u4F5C\u6210\u529F"),p.onOk(),u.next=28;break;case 26:u.prev=26,u.t1=u.catch(0);case 28:case"end":return u.stop()}},h,null,[[0,26]])}));return function(){return U.apply(this,arguments)}}(),z=(0,l.useState)(!1),N=(0,s.Z)(z,2),x=N[0],Y=N[1],Q=function(h){h===j.Apply_Refund?Y(!0):Y(!1)};return(0,e.jsx)(de.Z,{centered:!0,onOk:J,onCancel:p.onCancel,title:ve.get(p.orderStatus),width:600,open:p.open,bodyStyle:{padding:"24px"},children:(0,e.jsxs)(B.Z,(0,q.Z)((0,q.Z)({form:I,initialValues:{afterSalesType:j.Apply_Exchange,returnPointType:2}},me),{},{children:[[C.iF.Awaiting_Receipt,C.iF.Have_Been_Received].includes(p.orderStatus)&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(B.Z.Item,{label:"\u552E\u540E\u7C7B\u578B",name:"afterSalesType",children:(0,e.jsxs)(ee.Z,{onChange:Q,children:[(0,e.jsx)(X,{value:j.Apply_Exchange,children:"\u6362\u8D27"}),(0,e.jsx)(X,{value:j.Apply_Refund,children:"\u9000\u8D27\u9000\u6B3E"}),(0,e.jsx)(X,{value:j.Other,children:"\u5176\u4ED6"})]})})}),(p.orderStatus===C.iF.To_Be_Delivered||x)&&(0,e.jsx)(B.Z.Item,{name:"returnPointType",label:"\u5904\u7406\u65B9\u5F0F",children:(0,e.jsxs)($.ZP.Group,{children:[(0,e.jsx)($.ZP,{value:2,children:"\u8FD4\u8FD8\u79EF\u5206"}),(0,e.jsx)($.ZP,{value:1,children:"\u4E0D\u8FD4\u8FD8\u79EF\u5206"})]})}),(0,e.jsx)(B.Z.Item,{name:"reason",label:pe.get(p.orderStatus),rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}],children:(0,e.jsx)(Ee,{maxLength:200})})]}))})},Ze=he,De=r(79027),H=r.n(De),Te=r(31134),fe=new Map([[3,"\u7ED3\u675F\u8BA2\u5355"],[4,"\u552E\u540E\u8BB0\u5F55"],[5,"\u552E\u540E\u8BB0\u5F55"]]),Oe=function(){var p=(0,ie.D)("id")||"",G=(0,l.useState)(3),L=(0,s.Z)(G,2),I=L[0],J=L[1],z=(0,l.useState)({}),N=(0,s.Z)(z,2),x=N[0],Y=N[1],Q=(0,l.useState)({}),U=(0,s.Z)(Q,2),h=U[0],F=U[1],g=(0,l.useState)({}),w=(0,s.Z)(g,2),u=w[0],Se=w[1],je=(0,l.useState)({}),re=(0,s.Z)(je,2),W=re[0],Re=re[1],Ie=(0,l.useState)([]),ae=(0,s.Z)(Ie,2),ge=ae[0],Pe=ae[1],te=function(){var E=(0,v.Z)((0,P.Z)().mark(function se(){var i;return(0,P.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,f.next=3,b.dz(p);case 3:i=f.sent,J(i==null?void 0:i.order.status),Y(i==null?void 0:i.order),F(i==null?void 0:i.goods),Se(i==null?void 0:i.buyer),Re(i==null?void 0:i.seller),Pe(i.orderRecord),console.log(i.orderRecord),f.next=15;break;case 13:f.prev=13,f.t0=f.catch(0);case 15:case"end":return f.stop()}},se,null,[[0,13]])}));return function(){return E.apply(this,arguments)}}();(0,l.useEffect)(function(){te()},[]);var Fe=(0,l.useState)(!1),ne=(0,s.Z)(Fe,2),ue=ne[0],k=ne[1],Ae=function(){k(!0)},Ce=function(){k(!1),te()};return(0,e.jsxs)(le.ZP,{children:[(0,e.jsxs)("div",{className:H()["order-detail-container"],children:[(0,e.jsx)("h1",{children:Te._y.get(I)}),(0,e.jsxs)(a.Z,{column:2,title:"\u8BA2\u5355\u4FE1\u606F",children:[(0,e.jsx)(a.Z.Item,{label:"\u8BA2\u5355\u7F16\u53F7",children:x.orderSn}),(0,e.jsx)(a.Z.Item,{label:"\u4E0B\u5355\u65F6\u95F4",children:n()(x.createdAt).format("YYYY-MM-DD HH:mm")}),(0,e.jsxs)(a.Z.Item,{label:"\u8BA2\u5355\u91D1\u989D",children:["\xA5 ",x.totalPrice]}),(0,e.jsx)(a.Z.Item,{label:"\u4ED8\u6B3E\u65F6\u95F4",children:n()(x.payedAt).format("YYYY-MM-DD HH:mm")})]}),(0,e.jsx)(c.Z,{}),(0,e.jsxs)(a.Z,{column:2,title:"\u5546\u54C1\u4FE1\u606F",children:[(0,e.jsx)(a.Z.Item,{label:"\u5546\u54C1\u540D\u79F0",children:h.name}),(0,e.jsx)(a.Z.Item,{label:"\u5546\u54C1\u7F16\u53F7",children:h.goodsID}),(0,e.jsx)(a.Z.Item,{label:"\u8D2D\u4E70\u89C4\u683C",children:h.productAttr}),(0,e.jsx)(a.Z.Item,{label:"\u8D2D\u4E70\u6570\u91CF",children:h.quantity}),(0,e.jsxs)(a.Z.Item,{label:"\u5546\u54C1\u5355\u4EF7",children:["\xA5 ",h.unitPrice]}),(0,e.jsx)(a.Z.Item,{label:"\u5546\u54C1\u8FD0\u8D39",children:h.postPrice}),(0,e.jsx)(a.Z.Item,{label:"\u5546\u54C1\u4E3B\u56FE",children:(0,e.jsx)(T.Z,{width:100,src:h.image})})]}),(0,e.jsx)(c.Z,{}),(0,e.jsxs)(a.Z,{column:2,title:"\u4E70\u5BB6\u4FE1\u606F",children:[(0,e.jsx)(a.Z.Item,{label:"\u7528\u6237\u8D26\u53F7",children:u.userName}),(0,e.jsx)(a.Z.Item,{label:"\u7528\u6237\u7535\u8BDD",children:u.userPhone}),(0,e.jsx)(a.Z.Item,{label:"\u6240\u5C5E\u516C\u53F8",children:u.userOrganizationName}),(0,e.jsx)(a.Z.Item,{label:"\u6536\u4EF6\u59D3\u540D",children:u.singerName}),(0,e.jsx)(a.Z.Item,{label:"\u6536\u4EF6\u7535\u8BDD",children:u.singerPhone}),(0,e.jsx)(a.Z.Item,{label:"\u6536\u4EF6\u5730\u5740",children:u.singerAddr})]}),(0,e.jsx)(c.Z,{}),(0,e.jsxs)(a.Z,{column:2,title:"\u5356\u5BB6\u4FE1\u606F",children:[(0,e.jsx)(a.Z.Item,{label:"\u7528\u6237\u8D26\u53F7",children:W.name}),(0,e.jsx)(a.Z.Item,{label:"\u5356\u5BB6\u7535\u8BDD",children:W.phone}),(0,e.jsx)(a.Z.Item,{label:"\u8BA4\u8BC1\u4F01\u4E1A",children:W.organizationName}),(0,e.jsx)(a.Z.Item,{label:"\u8BA4\u8BC1\u804C\u4F4D",children:W.position})]}),(0,e.jsx)(c.Z,{}),(0,e.jsx)(a.Z,{column:2,title:"\u8BA2\u5355\u8BB0\u5F55"}),(0,e.jsx)(d.Z,{children:ge.map(function(E){return(0,e.jsx)(d.Z.Item,{children:(0,e.jsxs)(o.Z,{children:[(0,e.jsx)(Z.Z,{span:3,children:E.recordName}),(0,e.jsx)(Z.Z,{span:4,children:n()(E.recordTime).format("YYYY-MM-DD HH:mm")}),E.records&&(0,e.jsxs)(Z.Z,{span:4,children:[(0,e.jsxs)("p",{children:["\u552E\u540E\u7C7B\u578B\uFF1A",E.records.afterSale]}),E.records.returnPoint&&(0,e.jsxs)("p",{children:["\u5904\u7406\u65B9\u5F0F\uFF1A",E.records.returnPoint]}),(0,e.jsxs)("p",{children:["\u552E\u540E\u8BB0\u5F55\uFF1A",E.records.reason]})]})]})})})}),(0,e.jsx)(c.Z,{}),[3,4,5].includes(I)&&(0,e.jsx)("div",{className:H()["operate-btn"],children:(0,e.jsx)(m.Z,{block:!0,type:"primary",onClick:Ae,children:fe.get(I)})}),[6].includes(I)&&(0,e.jsx)("div",{className:H()["operate-btn"],children:(0,e.jsx)(m.Z,{block:!0,disabled:!0,type:"primary",children:"\u8BA2\u5355\u5DF2\u7ED3\u675F"})})]}),ue&&(0,e.jsx)(Ze,{id:p,open:ue,onCancel:function(){return k(!1)},orderStatus:I,onOk:function(){return Ce()}})]})},ye=Oe},1987:function(M,A,r){"use strict";r.d(A,{dz:function(){return O},Fw:function(){return D},qJ:function(){return V},NN:function(){return K},ui:function(){return P}});var t=r(90636),m=r(3182),S=r(99871),d=r(636);function O(s){return o.apply(this,arguments)}function o(){return o=(0,m.Z)((0,t.Z)().mark(function s(l){return(0,t.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.Z)("/api/v1/order/getOrderDetail?queryOrderID=".concat(l)));case 1:case"end":return n.stop()}},s)})),o.apply(this,arguments)}function D(s){return Z.apply(this,arguments)}function Z(){return Z=(0,m.Z)((0,t.Z)().mark(function s(l){return(0,t.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.Z)("/api/v1/order/getOrderList?".concat((0,S.R)(l))));case 1:case"end":return n.stop()}},s)})),Z.apply(this,arguments)}function _(s){return T.apply(this,arguments)}function T(){return T=_asyncToGenerator(_regeneratorRuntime().mark(function s(l){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/v1/order/exportOrder?".concat(objectToUrlParams(l)),{responseType:"arraybuffer"}));case 1:case"end":return n.stop()}},s)})),T.apply(this,arguments)}function V(s){return c.apply(this,arguments)}function c(){return c=(0,m.Z)((0,t.Z)().mark(function s(l){return(0,t.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.Z)("api/v1/order/closeOrder",{method:"POST",data:l}));case 1:case"end":return n.stop()}},s)})),c.apply(this,arguments)}function K(s){return a.apply(this,arguments)}function a(){return a=(0,m.Z)((0,t.Z)().mark(function s(l){return(0,t.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.Z)("api/v1/order/applyExchange",{method:"POST",data:l}));case 1:case"end":return n.stop()}},s)})),a.apply(this,arguments)}function P(s){return v.apply(this,arguments)}function v(){return v=(0,m.Z)((0,t.Z)().mark(function s(l){return(0,t.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.Z)("api/v1/order/applyRefund",{method:"POST",data:l}));case 1:case"end":return n.stop()}},s)})),v.apply(this,arguments)}}}]);
