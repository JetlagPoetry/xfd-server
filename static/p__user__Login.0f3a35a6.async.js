(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{34687:function(O){O.exports={container:"container___1sYa-"}},19319:function(O,y,t){"use strict";t.r(y);var p=t(71194),d=t(50146),m=t(90636),l=t(11849),s=t(34792),v=t(48086),E=t(3182),R=t(2824),M=t(67294),w=t(73935),k=t(80521),C=t(2603),$=t(43504),B=t(5966),G=t(16434),b=t(63434),U=t(81910),I=t(92592),W=t(34687),j=t.n(W),S=t(29811),f=t(975),x=t(7120),Z=t.n(x),i=t(85893),L=function(){var T=(0,U.tT)("@@initialState"),J=T.initialState,F=T.setInitialState,N=(0,M.useState)(!1),A=(0,R.Z)(N,2),z=A[0],D=A[1],Y=function(){var g=(0,E.Z)((0,m.Z)().mark(function h(c){var o,P,K,_;return(0,m.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(c.checkAgreement){u.next=3;break}return v.ZP.warn("\u8BF7\u9605\u8BFB\u5E76\u52FE\u9009\u7528\u6237\u534F\u8BAE"),u.abrupt("return");case 3:return u.next=5,(0,S.x4)({code:c.captcha,phone:c.mobile,source:2});case 5:if(o=u.sent,o.status!==10010){u.next=13;break}D(!0),P="https://open.weixin.qq.com/sns/getexpappinfo?appid=wx91e0c51b45f4b8f9&path=pages%2Flogin%2Flogin.html#wechat-redirect",K=document.getElementById("canvas"),I.toCanvas(K,P),u.next=33;break;case 13:return v.ZP.success("\u767B\u5F55\u6210\u529F"),localStorage.setItem("expiresTime",Date.now()+o.expiresAt),localStorage.setItem("token","".concat(o.tokenType," ").concat(o.accessToken)),localStorage.setItem("userRole",o.userRole),u.next=19,(0,w.flushSync)(function(){F(function(r){return(0,l.Z)((0,l.Z)({},r),{},{user:{userRole:o.userRole}})})});case 19:_="",u.t0=o.userRole,u.next=u.t0===f.i.Buyers?23:u.t0===f.i.Supplier?25:u.t0===f.i.Management?27:u.t0===f.i.Super_Management?29:31;break;case 23:return _="/point/buyers/application/record",u.abrupt("break",32);case 25:return _="/product/list",u.abrupt("break",32);case 27:return _="/point/company",u.abrupt("break",32);case 29:return _="/point/company",u.abrupt("break",32);case 31:return u.abrupt("break",32);case 32:U.m8.push(_);case 33:case"end":return u.stop()}},h)}));return function(c){return g.apply(this,arguments)}}();return(0,M.useEffect)(function(){var g=localStorage.getItem("token"),h=localStorage.getItem("expiresTime"),c=localStorage.getItem("userRole");if(console.log(Number(h)*1e3>Date.now()),g&&h&&Number(h)*1e3>Date.now()){var o="";switch(Number(c)){case f.i.Buyers:o="/point/buyers/application/record";break;case f.i.Supplier:o="/product/list";break;case f.i.Management:o="/point/company";break;case f.i.Super_Management:o="/point/company";break;default:break}U.m8.push(o)}},[]),(0,i.jsx)("div",{className:j().container,children:(0,i.jsxs)("div",{children:[(0,i.jsxs)($.U,{logo:(0,i.jsx)("img",{alt:"logo",src:Z()}),title:"\u65B0\u53D1\u5730\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF",onFinish:Y,children:[(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(B.Z,{fieldProps:{size:"large",prefix:(0,i.jsx)(k.Z,{className:"prefixIcon"})},name:"mobile",placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,i.jsx)(G.Z,{fieldProps:{size:"large",prefix:(0,i.jsx)(C.Z,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(h,c){return h?"".concat(c," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},name:"captcha",phoneName:"mobile",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"},{pattern:/^\d{1,6}$/,message:"\u9A8C\u8BC1\u7801\u683C\u5F0F\u9519\u8BEF\uFF01"}],onGetCaptcha:function(){var g=(0,E.Z)((0,m.Z)().mark(function h(c){var o,P;return(0,m.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,S.Z3)({phone:c});case 2:o=_.sent,P=o.status,P===200&&v.ZP.success("\u624B\u673A\u53F7 ".concat(c," \u9A8C\u8BC1\u7801\u53D1\u9001\u6210\u529F!"));case 5:case"end":return _.stop()}},h)}));return function(h){return g.apply(this,arguments)}}()}),(0,i.jsx)(b.Z,{noStyle:!0,name:"checkAgreement"}),"\xA0\xA0\u9605\u8BFB\u5E76\u5DF2\u540C\u610F",(0,i.jsx)("a",{href:"https://xfd-t-1313159791.cos.ap-beijing.myqcloud.com/web/privacy.txt",target:"_blank",children:"\u300A\u65B0\u53D1\u5730\u96C6\u91C7\u4EA4\u6613\u6240\u7528\u6237\u534F\u8BAE\u548C\u9690\u79C1\u58F0\u660E\u300B"}),(0,i.jsx)("div",{style:{marginBottom:10}})]}),(0,i.jsx)(d.Z,{centered:!0,footer:null,title:"\u8BF7\u5148\u5B8C\u6210\u8EAB\u4EFD\u8BA4\u8BC1",open:z,onCancel:function(){return D(!1)},onOk:function(){return D(!1)},style:{textAlign:"center"},children:(0,i.jsxs)("div",{style:{alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,i.jsx)("p",{style:{fontSize:"12px"},children:"\u4E3A\u4FDD\u969C\u4EA4\u6613\u5B89\u5168\uFF0C\u8BF7\u4F7F\u7528\u5FAE\u4FE1\u626B\u7801\uFF0C\u5728\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F\u5B8C\u6210\u8EAB\u4EFD\u8BA4\u8BC1"}),(0,i.jsx)("canvas",{height:300,id:"canvas",width:300})]})})]})})};y.default=L},29811:function(O,y,t){"use strict";t.d(y,{x4:function(){return s},Z3:function(){return E},uO:function(){return U},v5:function(){return W},h8:function(){return S}});var p=t(90636),d=t(3182),m=t(99871),l=t(636);function s(r){return v.apply(this,arguments)}function v(){return v=(0,d.Z)((0,p.Z)().mark(function r(a){return(0,p.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.Z)("/api/v1/user/login",{method:"POST",data:a}));case 1:case"end":return e.stop()}},r)})),v.apply(this,arguments)}function E(r){return R.apply(this,arguments)}function R(){return R=(0,d.Z)((0,p.Z)().mark(function r(a){return(0,p.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.Z)("/api/v1/user/sendCode",{method:"POST",data:a}));case 1:case"end":return e.stop()}},r)})),R.apply(this,arguments)}function M(r){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime().mark(function r(a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("api/v1/user/submitRole",{method:"POST",data:a}));case 1:case"end":return e.stop()}},r)})),w.apply(this,arguments)}function k(){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("api/v1/user/verifyInfo",{method:"POST"}));case 1:case"end":return n.stop()}},r)})),C.apply(this,arguments)}function $(){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("api/v1/user/info",{method:"GET"}));case 1:case"end":return n.stop()}},r)})),B.apply(this,arguments)}function G(r){return b.apply(this,arguments)}function b(){return b=_asyncToGenerator(_regeneratorRuntime().mark(function r(a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("api/v1/user/modifyInfo",{method:"POST",data:a}));case 1:case"end":return e.stop()}},r)})),b.apply(this,arguments)}function U(r){return I.apply(this,arguments)}function I(){return I=(0,d.Z)((0,p.Z)().mark(function r(a){return(0,p.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.Z)("/api/v1/user/assignAdmin",{method:"POST",data:a}));case 1:case"end":return e.stop()}},r)})),I.apply(this,arguments)}function W(r){return j.apply(this,arguments)}function j(){return j=(0,d.Z)((0,p.Z)().mark(function r(a){return(0,p.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.Z)("/api/v1/user/getAdmins?".concat((0,m.R)(a))));case 1:case"end":return e.stop()}},r)})),j.apply(this,arguments)}function S(r){return f.apply(this,arguments)}function f(){return f=(0,d.Z)((0,p.Z)().mark(function r(a){return(0,p.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.Z)("/api/v1/user/deleteUser",{method:"POST",data:a}));case 1:case"end":return e.stop()}},r)})),f.apply(this,arguments)}function x(r){return Z.apply(this,arguments)}function Z(){return Z=_asyncToGenerator(_regeneratorRuntime().mark(function r(a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/common/area?".concat(objectToUrlParams(a)),{method:"GET"}));case 1:case"end":return e.stop()}},r)})),Z.apply(this,arguments)}function i(r){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime().mark(function r(a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/common/uploadFile",{method:"POST",data:a}));case 1:case"end":return e.stop()}},r)})),L.apply(this,arguments)}function H(r){return T.apply(this,arguments)}function T(){return T=_asyncToGenerator(_regeneratorRuntime().mark(function r(a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/common/uploadFile",{method:"DELETE",data:a}));case 1:case"end":return e.stop()}},r)})),T.apply(this,arguments)}function J(){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/v1/user/getAddressList",{method:"GET"}));case 1:case"end":return n.stop()}},r)})),F.apply(this,arguments)}function N(r){return A.apply(this,arguments)}function A(){return A=_asyncToGenerator(_regeneratorRuntime().mark(function r(a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/user/addAddress",{method:"POST",data:a}));case 1:case"end":return e.stop()}},r)})),A.apply(this,arguments)}function z(r){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function r(a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/user/modifyAddress",{method:"POST",data:a}));case 1:case"end":return e.stop()}},r)})),D.apply(this,arguments)}function Y(r){return g.apply(this,arguments)}function g(){return g=_asyncToGenerator(_regeneratorRuntime().mark(function r(a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/user/deleteAddress",{method:"POST",data:a}));case 1:case"end":return e.stop()}},r)})),g.apply(this,arguments)}function h(){return c.apply(this,arguments)}function c(){return c=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}},r)})),c.apply(this,arguments)}function o(){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}},r)})),P.apply(this,arguments)}function K(){return _.apply(this,arguments)}function _(){return _=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}},r)})),_.apply(this,arguments)}function Q(){return u.apply(this,arguments)}function u(){return u=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}},r)})),u.apply(this,arguments)}},99871:function(O,y,t){"use strict";t.d(y,{R:function(){return p},D:function(){return d}});function p(m){var l=Object.keys(m).map(function(s){return"".concat(s,"=").concat(m[s])});return l.join("&")}function d(m){var l=new RegExp("(^|&)"+m+"=([^&]*)(&|$)"),s=window.location.search.substr(1).match(l);return s!=null?decodeURIComponent(s[2]):null}},636:function(O,y,t){"use strict";var p=t(34792),d=t(48086),m=t(12666),l=m.Z.create({baseURL:"/",timeout:3e4,withCredentials:!1});l.interceptors.request.use(function(s){s&&s.headers&&(s.headers["Content-Type"]||(s.headers["Content-Type"]="application/json"));var v=localStorage.getItem("token");return(s==null?void 0:s.url)!=="/api/v1/user/login"&&(s.headers.Authorization="".concat(v)),s},function(s){return Promise.reject(s)}),l.interceptors.response.use(function(s){var v=s.data,E=s.data,R=s.status,M=s.statusText;if(R!==200)return d.ZP.error(M),E;if(E.status===10010)return E;if(E.status!==200)throw d.ZP.error(E.data||s.msg),new Error(s.msg);return E.data},function(s){return console.log("err"+s),Promise.reject(s)}),y.Z=l},7120:function(O,y,t){O.exports=t.p+"static/logo.7d149fea.jpg"}}]);
