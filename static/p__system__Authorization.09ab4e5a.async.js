(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[472],{87588:function(P,D,e){"use strict";var R=e(22122),C=e(67294),$=e(61144),E=e(65734),c=function(h,l){return C.createElement(E.Z,(0,R.Z)({},h,{ref:l,icon:$.Z}))};D.Z=C.forwardRef(c)},63549:function(P){P.exports={"table-wrapper":"table-wrapper___24Zk1",actions:"actions___79eP3"}},91180:function(P,D,e){"use strict";e.r(D),e.d(D,{default:function(){return oe}});var R=e(8963),C=e(38291),$=e(34792),E=e(48086),c=e(90636),g=e(11849),h=e(3182),l=e(2824),Ee=e(49111),b=e(19650),Oe=e(57663),p=e(71577),je=e(71194),K=e(50146),o=e(67294),w=e(96486),q=e(36773),_=e(87588),L=e(81910),T=e(29811),xe=e(43358),ee=e(34041),Ie=e(47673),U=e(77808),Pe=e(9715),Z=e(71481),ae=/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/,n=e(85893),ne={labelCol:{span:6},wrapperCol:{span:16}},te=function(a){var S=(0,L.tT)("@@initialState"),M=S.initialState,O=[{label:"\u7BA1\u7406\u5458",value:4}];M&&M.user&&M.user.userRole===5&&O.push({label:"\u8D85\u7EA7\u7BA1\u7406\u5458",value:5});var j=Z.Z.useForm(),A=(0,l.Z)(j,1),i=A[0],z=function(){var u=(0,h.Z)((0,c.Z)().mark(function v(){var m,y;return(0,c.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,i.validateFields();case 2:return m=s.sent,y={phone:m.phone,username:m.username,role:m.role},a.type==="edit"&&Object.assign(y,{userID:a.managerData.userID}),s.prev=5,s.next=8,T.uO(y);case 8:E.ZP.success("\u64CD\u4F5C\u6210\u529F"),a.onOk(),s.next=14;break;case 12:s.prev=12,s.t0=s.catch(5);case 14:case"end":return s.stop()}},v,null,[[5,12]])}));return function(){return u.apply(this,arguments)}}(),x=function(){i.resetFields(),a.onCancel()};return a.type==="edit"&&a.managerData&&i.setFieldsValue({username:a.managerData.username,phone:a.managerData.phone,role:a.managerData.role}),(0,o.useEffect)(function(){i.setFieldsValue({username:a.managerData.username,phone:a.managerData.phone,role:a.managerData.role})},[a.managerData]),(0,n.jsx)(K.Z,{bodyStyle:{padding:"24px"},centered:!0,onCancel:x,onOk:z,open:a.visible,title:a.type==="add"?"\u65B0\u589E\u7BA1\u7406\u5458":"\u7F16\u8F91\u7BA1\u7406\u5458",children:(0,n.jsxs)(Z.Z,(0,g.Z)((0,g.Z)({form:i},ne),{},{children:[(0,n.jsx)(Z.Z.Item,{name:"username",label:"\u59D3\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}],children:(0,n.jsx)(U.Z,{disabled:a.type==="edit"})}),(0,n.jsx)(Z.Z.Item,{name:"phone",label:"\u624B\u673A\u53F7",rules:[{required:!0},function(){return{validator:function(v,m){return ae.test(m)?Promise.resolve():Promise.reject("\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E")}}}],children:(0,n.jsx)(U.Z,{disabled:a.type==="edit"})}),(0,n.jsx)(Z.Z.Item,{name:"role",label:"\u89D2\u8272",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}],children:(0,n.jsx)(ee.Z,{options:O})})]}))})},re=te,se=e(63549),V=e.n(se),le=K.Z.confirm,ue=function(){var a=(0,L.tT)("@@initialState"),S=a.initialState,M=[{title:"\u59D3\u540D",dataIndex:"username",key:"username"},{title:"\u624B\u673A\u53F7\u7801",dataIndex:"phone",key:"phone"},{title:"\u6743\u9650\u7B49\u7EA7",dataIndex:"roleName",key:"roleName"},{title:"\u6743\u9650\u8BF4\u660E",dataIndex:"comment",key:"comment"},{title:"\u64CD\u4F5C",dataIndex:"action",key:"action",render:function(t,f){return me===1&&f.role===5?"-":(0,n.jsxs)(b.Z,{children:[(0,n.jsx)(p.Z,{type:"link",onClick:function(){return ye(f)},children:"\u4FEE\u6539"}),(0,n.jsx)(p.Z,{type:"link",onClick:function(){return De(f)},children:"\u5220\u9664"})]})}}],O=(0,o.useState)(!1),j=(0,l.Z)(O,2),A=j[0],i=j[1],z=(0,o.useState)({current:1,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(t){return"\u603B\u5171 ".concat(t," \u6761")}}),x=(0,l.Z)(z,2),u=x[0],v=x[1],m=function(t){v({current:t.current||1,pageSize:t.pageSize||10})},y=(0,o.useState)([]),F=(0,l.Z)(y,2),s=F[0],de=F[1],ce=(0,o.useState)(0),W=(0,l.Z)(ce,2),me=W[0],ve=W[1],B=(0,w.debounce)((0,h.Z)((0,c.Z)().mark(function d(){var t;return(0,c.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i(!0),r.next=4,T.v5({pageNum:u.current,pageSize:u.pageSize});case 4:t=r.sent,t&&(de(t.list),v((0,g.Z)((0,g.Z)({},u),{},{total:t.totalNum})),ve(t.rootNum)),i(!1),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),i(!1);case 12:case"end":return r.stop()}},d,null,[[0,9]])})));(0,o.useEffect)(function(){B()},[u.current,u.pageSize]);var fe=(0,o.useState)(!1),k=(0,l.Z)(fe,2),G=k[0],N=k[1],ge=(0,o.useState)("add"),J=(0,l.Z)(ge,2),he=J[0],Q=J[1],Ze=(0,o.useState)({}),H=(0,l.Z)(Ze,2),Se=H[0],X=H[1],Me=function(){N(!0),Q("add")},Y=function(){N(!1),X({})},ye=function(t){N(!0),Q("edit"),X({username:t.username,phone:t.phone,role:t.role})},De=function(t){le({title:"\u5220\u9664\u786E\u8BA4",icon:(0,n.jsx)(_.Z,{}),content:"\u786E\u5B9A\u5220\u9664\u8BE5\u8D26\u53F7\u5417\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C",onOk:function(){return(0,h.Z)((0,c.Z)().mark(function r(){return(0,c.Z)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,T.h8({userID:t.userID});case 2:E.ZP.success("\u64CD\u4F5C\u6210\u529F"),B();case 4:case"end":return I.stop()}},r)}))()},onCancel:function(){}})},Ce=function(){B(),Y()};return(0,n.jsx)(q.ZP,{children:(0,n.jsxs)("div",{className:V()["table-wrapper"],children:[(0,n.jsx)("div",{className:V().actions,children:S&&S.user&&S.user.userRole===5&&(0,n.jsx)(p.Z,{type:"primary",onClick:Me,children:"\u65B0\u589E\u7BA1\u7406\u5458"})}),(0,n.jsx)(C.Z,{rowKey:"userID",columns:M,dataSource:s,loading:A,onChange:m,pagination:u,scroll:{x:"max-content"}}),G&&(0,n.jsx)(re,{managerData:Se,onCancel:Y,onOk:Ce,type:he,visible:G})]})})},oe=ue}}]);
